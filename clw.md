# Command Line Wizardry


## Введение

Операционная система Unix появилась давно, в семидесятых годах XX века. По
правде говоря, эта система была написана программистами для программистов, что
определило некоторые её особенности. В семидесятых концепция графического
интерфейса для компьютера (то, что называется [WIMP]) только появлялась, так что
не удивительно, что основным способом взаимодествия человека и машины был
текстовый интерфейс ([телетайп] был широко распространен).


## Терминал и оболочка

Для того, чтобы взаимодействовать с человеком, среди всех программ, входивших в
Unix существовала специальная, предназначенная для получения команд и запуска
других программ. Она называлась *shell* или, по-русски, *оболочка*. В настоящее
время существует несколько вариантов оболочки, отличающихся функциональностью.
Самой распространенной (и используемой по умолчанию в большинстве случаев)
является оболочка **bash**.

Когда пользователь запускает **Terminal** (эта программа расположена в каталоге
/Applications/Utilities), можно сказать, что эта программа ответственна только
за рисование окна. А внутри терминала запускается оболочка, которая и принимает
команды пользователя.

![Terminal image](terminal.png "Окно программы Terminal")

Оболочка принимает команду от пользователя, выполняет её и печатает результат.
На картинке выше текст, напечатанный зеленым цветом - _приглашение_ **bash**.
Текст "**ls**" - команда, введенная пользователем, а остальной текст - результат
выполнения команды **ls**.

На самом деле, у оболочки есть относительно немного команд. Когда я писал этот
текст, я насчитал у **bash** 107 _встроенных_ команд. Но оболочка устроена так,
что если введенная команда не является встроенной, то оболочка ищет в
специальном каталоге (или специальных каталогах) программу с таким же именем.
Если такая программа найдется, оболочка запускает её, как будто бы это была
встроенная команда.

Например, в качестве упражнения, можно сравнить результат выполнения встроенной
команды **history** с результатом запуска уже упоминавшейся программы **ls**. По
результату непросто догадаться, где – встроенная команда, а где — программа. И
это хорошо. Больше мы на этом задерживаться не будем. Слова "программа" и
"команда" будем считать взаимозаменяемыми.


## Запуск простых команд

Вот несколько простых команд Unix:

* **ls** - команда, показывающая содержимое каталога. Если **ls** запустить с _опцией_ "**-l**", то помимо имен файлов будут показаны их размер, дата последнего изменения и кое-что еще, на что прямо сейчас можно не обращать внимания.
* команда **cd** (это, кстати, _встроенная_ команда) позволяет изменить текущий каталог. Для этого нужно передать имя каталога в качестве параметра. Например, если в текущем каталоге есть подкаталог Documents, можно перейти в него командой "**cd Documents**".
* помощью команды **cat** можно посмотреть содержимое файла. Если команде **cat** в качестве параметров указать несколько файлов, она покажет их все подряд.
* команды **head** и **tail** похожи. Первая показывает начало, а вторая — конец файла, указанного в качестве параметра. По умолчанию будет показано 10 строк, но можно передать число строк в виде _опции_, например **tail -5 file.txt** покажет 5 последних строк файла file.txt.

Стоит попробовать их позапускать и посмотреть на результат.

## Стандартные потоки ввода и вывода

Концепция потоков ввода и вывода возникла ещё до появления Unix.

Идея проста — у программы есть (почти) всегда есть три потока, три трубы, с
помощью которых она общается с внешним миром. В Unix эти потоки пронумерованы:

- Стандартный поток ввода, так называемый STDIN, номер 0
- Стандартный поток вывода, так называемый STDOUT, номер 1
- Стандартный поток ошибок, так называемый STDERR, номер 2

По умолчанию программа получает данные из стандартного потока ввода, выводит
результат на стандартный поток вывода, а сообщения об ошибках отправляет на
стандартный поток ошибок. Если не делать никаких изменений, то стандартный поток
запущенной программы связан с тем, что пользователь вводит с клавиатуры, а
стандартный вывод и вывод ошибок — с печатью на экране, в окне **Terminal**.


[WIMP]: https://en.wikipedia.org/wiki/WIMP_(computing)
[телетайп]: https://ru.wikipedia.org/wiki/Телетайп
